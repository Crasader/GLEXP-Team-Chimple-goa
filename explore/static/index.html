<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	
	<link rel="stylesheet" href="styles/main.css">
<title>CHIMPLE CITY</title>
<style type="text/css">
body{
	 background:#ffffff;
	 font:bold 12px Arial, Helvetica, sans-serif;
	 margin:0;
	 padding:0;
	 min-width:100%;
     min-height: 100%;
    
    width : 100%;
    height : 100%;
    
	 color:#bbbbbb; 
}
    
/* start :-  css to add text from the html popup to phaser game */
.container {    
    width: 100%; margin: 0 auto; overflow: hidden; height:100%;
        min-height: 90%;
    min-width: 90%;
    }

#gameCanvas {	float: left; width: 100%; height: 100%;}

#mask {
	display: none;
	background: #000; 
	position: fixed; left: 0; top: 0; 
	z-index: 10;
	width: 100%; height: 100%;
    
    min-height: 90%;
    min-width: 90%;
    
	opacity: 0.8;
	z-index: 999;
}

.login-popup{
    width : 90%;
    height : 90%;
    
    min-height: 90%;
    min-width: 90%;
    
    margin-left: 5%;
    margin-top: 2%;
	display:none;
	background: #333;
	border: 2px solid #ddd;
	float: left;
	font-size: 1.2em;
	position: fixed;
	z-index: 99999;

	-moz-box-shadow: 0px 0px 20px #999; /* Firefox */
    -webkit-box-shadow: 0px 0px 20px #999; /* Safari, Chrome */
	border-radius:3px 3px 3px 3px;
    -moz-border-radius: 3px; /* Firefox */
    -webkit-border-radius: 3px; /* Safari, Chrome */
}

#pankaj{
    width : 20%;
    height : 30%;
    
    min-height: 30%;
    min-width: 15%;
    
    margin-left: 0%;
    margin-top: 2%;
    
	display:none;
	background: #333;
	border: 2px solid #ddd;
	float: left;
	font-size: 1.2em;
	position: fixed;
	z-index: 999999;
	box-shadow: 0px 0px 20px #999;
	-moz-box-shadow: 0px 0px 20px #999; /* Firefox */
    -webkit-box-shadow: 0px 0px 20px #999; /* Safari, Chrome */
	border-radius:3px 3px 3px 3px;
    -moz-border-radius: 3px; /* Firefox */
    -webkit-border-radius: 3px; /* Safari, Chrome */
}
/* end :-  css to add text from the html popup to phaser game */
    

/* start :-  css to show the details in popup when user select any text */
    
#gdx-bubble-main {
    border: 1px solid #999;
    border-radius: 4px;
    box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
    color: #222;
    font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
    font-size: 14px;
    line-height: normal;
    padding: 9px;
    position: absolute;
    width: 300px
}

#gdx-bubble-main:after {
    clear: both;
    content: "";
    display: table
}

#gdx-bubble-close {
    position: absolute;
    top: 0;
    right: 0;
    width: 16px;
    height: 16px;
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAYUlEQVQYV12PwQ2AMAwD2w3YBEaAycsIsAkbgC+qowikeyCfHLe31l5xiUM8gm8RQ2x9hmuRECIUNwL2KSwhRCh2BFda4j9CTlbBtQi5ySfy5mzMTXWka3FyEwLPzJv/TR8o8xvGTnBWXwAAAABJRU5ErkJggg==');
    background-position: center;
    background-repeat: no-repeat;
    cursor: pointer;
    opacity: 0.35
}

#gdx-bubble-close:hover {
    opacity: 0.8
}

#gdx-bubble-query-row {
    margin-bottom: 9px
}

#gdx-bubble-query,
#gdx-bubble-audio-icon {
    display: inline-block;
    height: 20px;
    line-height: 20px;
    vertical-align: top
}

#gdx-bubble-query {
    font-size: 16px;
    font-weight: bold
}

#gdx-bubble-audio-icon {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAcUlEQVQ4y2P4//8/AyUYQhAH3gNxA7IAIQPmo/H3g/QA8XkgFiBkwHyoYnRQABVfj88AmGZcTuuHyjlgMwBZM7IE3NlQGhQe65EN+I8Dw8MLGgYoFpFqADK/YUAMwOsFigORatFIlYRElaRMWmaiBAMAp0n+3U0kqkAAAAAASUVORK5CYII=');
    background-position: center;
    background-repeat: no-repeat;
    cursor: pointer;
    margin-left: 8px;
    opacity: 0.5;
    width: 16px
}

#gdx-bubble-audio-icon:hover {
    opacity: 1
}

#gdx-bubble-meaning {
    line-height: 1.3
}

#gdx-bubble-options-tip,
#gdx-bubble-more,
#gdx-bubble-attribution {
    font-size: 12px;
    line-height: 1.3;
    margin-top: 9px
}

#gdx-bubble-options-tip {
    color: #c04
}

#gdx-bubble-more a {
    float: right;
    word-break: break-all
}

#gdx-bubble-attribution {
    color: #666;
    float: left;
    margin-right: 9px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    width: 230px
}

#gdx-bubble-attribution a {
    color: #073
}

#gdx-arrow-main {
    position: absolute;
    z-index: 99998
}

#gdx-bubble-arrow-inner-up,
#gdx-bubble-arrow-inner-down {
    background: transparent;
    border-left: 10px solid transparent;
    border-right: 10px solid transparent;
    left: 2px;
    position: absolute;
    width: 0;
    z-index: 99999
}

#gdx-bubble-arrow-inner-up {
    border-bottom: 10px solid #ffd;
    top: 2px
}

#gdx-bubble-arrow-inner-down {
    border-top: 10px solid #ffd
}

#gdx-bubble-arrow-outer-up,
#gdx-bubble-arrow-outer-down {
    background: transparent;
    border-left: 12px solid transparent;
    border-right: 12px solid transparent;
    left: 0;
    position: absolute;
    width: 0
}

#gdx-bubble-arrow-outer-up {
    border-bottom: 12px solid #999
}

#gdx-bubble-arrow-outer-down {
    border-top: 12px solid #999
}

.nytd_selection_button {
    display: none
}

#element_to_pop_up { 
    background-color:#fff;
    border-radius:15px;
    color:#000;
    display:none; 
    padding:20px;
    min-width:400px;
    min-height: 180px;
}
.b-close{
    cursor:pointer;
    position:absolute;
    right:10px;
    top:5px;
}
       
/* end :-  css to show the details in popup when user select any text */ 
    
    
</style>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
    
   <script src="jquery-2.2.1.min.js"></script> 
   <script src="jquery-ui.js"></script> 
   <script src="jquery-ui.min.js"></script> 
	<script src="scripts/phaser.min.js"></script>
	<script src="scripts/game.js"></script>
    <script src="jquery.bpopup.min.js"></script>
        
    
<script type="text/javascript" >
/* start js code :- add text from the html popup to phaser game */
    var flag=0, text_color="#000000", background_color="#000000";
    
    function chimple_html_to_phaser()
        {
            var textvalue = document.getElementById("text_area").value;
            window.callback.call(window.callbackContext, textvalue, text_color, background_color);     
            console.log("textvalue : "+ textvalue +" text_color : "+ text_color +" background_color : "+ background_color);
        }
    
    function DisplayColor(val)
    {
        if(val=="back")
            flag=1;
        else
            flag=0;
    }
 
    // used to convert the rgb to hex code
function componentToHex(c) {
    var hex = c.toString(16);
    return hex.length == 1 ? "0" + hex : hex;
}
        
function rgbToHex(r, g, b) {
    return "#" + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1);
}
    
/* end js code :- add text from the html popup to phaser game */
    
    
/* start js code :- to show the details in popup when user select any text */
    
    ;(function($) {

         // DOM Ready
        $(function() {

            // Binding a click event
            // From jQuery v.1.7.0 use .on() instead of .bind()
            $('#my-button').bind('click', function(e) {

                // Prevents the default action to be triggered. 
                e.preventDefault();

                // Triggering bPopup when click event is fired
                $('#element_to_pop_up').bPopup();

            });

        });

    })(jQuery);
	
// Get user selection text on page
function getSelectedText() {
var seltxt = '';
    if (window.getSelection) {
        seltxt =  window.getSelection();
    }
    else if (document.selection) {
        seltxt =  document.selection.createRange().text;
    }
    return seltxt;
}
	
// get the data from json and display it on the dialog box	
    
function displayContent(text)
{
   		var url = text + '.json';
		console.log('url '+url);
		var meaning = '';
			$.getJSON(url, function(jd) {
					console.log(jd);
					meaning = jd.meaning;
					meaning = $(meaning).text();
					$("#word").text(text);					
					$("#meaning_content").text(meaning);
					$("#example_content").text(jd.exmaples);
					$("#image_content").attr("src", jd.image);
               });
}	

// play sound when user press sound button
function sound_click()
{
	// for sound
	var su = new SpeechSynthesisUtterance();
	var text = document.getElementById("word").textContent;
	console.log(text);
	su.text = text;
	speechSynthesis.speak(su);
}

// clear selected when we try to select it on double click
function clearSelection() {
if(document.selection && document.selection.empty) {
    document.selection.empty();
} else if(window.getSelection) {
    var sel = window.getSelection();
    sel.removeAllRanges();
}
}
    
/* end js code :- to show the details in popup when user select any text */
    
    </script>
    
<script type="text/javascript">

$(document).ready(function() {
	// When clicking on the button close or the mask layer the popup closed
	$('#close_btn, #mask').click(function() { 
	  $('#mask , .login-popup, #pankaj').fadeOut(300 , function() {
		$('#mask').remove();
	});
	return false;
	});

    $('#ok_btn').click(function(){
        
        if(flag==0)
            {
                $("#text_area").css("color" , "rgb("+$("#r").val()+","+$("#g").val()+","+$("#b").val()+")"); 
                text_color= rgbToHex(parseInt($("#r").val()) , parseInt($("#g").val()) , parseInt($("#b").val()));
            }
        else
            {
                $("#login-box").css("background-color" , "rgb("+$("#r").val()+","+$("#g").val()+","+$("#b").val()+")")
                background_color = rgbToHex(parseInt($("#r").val()) , parseInt($("#g").val()) , parseInt($("#b").val()));
            }

        
        $("#pankaj").css({"display":"none"});         
    });
   
    
    $('#r, #g, #b').change(function(){
        if(flag==0)
            {
                $("#text_area").css("color" , "rgb("+$("#r").val()+","+$("#g").val()+","+$("#b").val()+")"); 
                text_color= rgbToHex(parseInt($("#r").val()) , parseInt($("#g").val()) , parseInt($("#b").val()));
            }
        else
            {
                $("#login-box").css("background-color" , "rgb("+$("#r").val()+","+$("#g").val()+","+$("#b").val()+")")
                background_color = rgbToHex(parseInt($("#r").val()) , parseInt($("#g").val()) , parseInt($("#b").val()));
            }
    });
    
    $("#back").click(function(){
       $('#pankaj').show(1000);
    });
    
    $("#text").click(function(){
       $('#pankaj').show(1000);
    });
    
    $("#close_rgb").click(function(){
       $('#pankaj').hide(1000);
    });
    
    
// jquery code to show the details in popup when user select any text
    
// double click to select the text and it will open it's content from json file
    $("#word, #meaning_content, #example_content").dblclick(function(e){
		var seltxt = getSelectedText();
		seltxt = $.trim(seltxt);
		console.log(seltxt);
		displayContent(seltxt);
//		console.log(seltxt);
    });
	
	// double click on text to select it, but it will not be selected
	$("#meaning, #example, #image").dblclick(function(e){
		clearSelection();	
	});
});

    
</script>
    
<link rel="canonical" href="http://www.alessioatzeni.com/wp-content/tutorials/jquery/login-box-modal-dialog-window/index.html" />
</head>
	
<body>

<div class="container">
<!-- start : code to show the details in popup when user select any text -->
<div id="element_to_pop_up">
    <a class="b-close">x<a/>

    <div id="myContent" class='content'>
	
		<div id="gdx-bubble-query-row" class="">
		<div id="gdx-bubble-query"><label id="word"> Apple </label></div>
		<div id="gdx-bubble-audio-icon" onclick = "sound_click()" >
		</div>
		</div>
		<div id="gdx-bubble-meaning">
			<label id="meaning"><b>Meaning:</b> </label> <br>
			<label id="meaning_content"> Apple is a fruit change</label><br><br>
			
			<label id="example"> <b>Example:</b> </label> <br>
			<label id="example_content"> Fruit </label> <br><br>
			
			<label id="image"><b> Image: </b></label> <br>
			<img src= "fruit.jpg" style="width:50%; height:50%;" id="image_content">
		</div>
		</div>
    </div>
<!-- end : code to show the details in popup when user select any text -->
    
	<div id="gameCanvas">
    </div>

<!-- start : code to show the slider to change the background color and text color -->
        <div id="pankaj">
            <input type="image" src="assets/close_pop.png" style="margin-left:84%;" id="close_rgb" />
            <p>R<input type="range" id="r" value="256" name="range" style="width:90%; maring-top:5%;" max="256"></p>
            <p>G<input type="range" id="g" value="256" name="range" style="width:90%" max="256"></p>
            <p>B<input type="range" id="b" value="256" name="range" style="width:90%" max="256"></p>
            <button type="button" style="margin-top:5%; width:50%; height:10%; margin-left : 25%;" id="ok_btn">OK </button>
		</div>
<!--  end : code to show the slider to change the background color and text color -->
    
    
<!--  start : code to show the popup when user click a sprite from phaser -->
        <div id="login-box" class="login-popup">
            <input type="image" src="assets/close_pop.png" style="margin-left:98%;" id="close_btn"/>
            
            <div id="left" style="width:10%; height:70%; float:left;">
                <button type="button" style="margin-top:5%; width:100%; height:10%;" onclick="DisplayColor('back');" id="back">Background color </button>
                
                <button type="button" style="margin-top:10%; width:100%; height:10%;" onclick="DisplayColor('text');" id="text">Text color </button>
            </div>
            
            <div id="right"  style="width:85%; height:95%; float:right; margin-right:3%;">
                <textarea style="width:100%; height:70%;" id="text_area"></textarea>
                <button type="button" style="margin-top:10%; width:10%; height:5%; margin-left:40%; margin-right:40%;"  id="submit" onclick="chimple_html_to_phaser()">Add Text </button>
            </div>
		</div>
<!--  end : code to show the popup when user click a sprite from phaser -->
</div>

</body>
</html>